services:
  livekit:
    image: livekit/livekit-server:latest
    command: --config /etc/livekit.yaml
    volumes:
      - ./livekit.yaml:/etc/livekit.yaml
    network_mode: host
    restart: unless-stopped

  agent:
    build:
      context: ..
      dockerfile: Dockerfile.agent
    env_file:
      - .env.production
    depends_on:
      - livekit
    network_mode: host
    restart: unless-stopped

  frontend:
    build:
      context: ../frontend
      dockerfile: Dockerfile
    env_file:
      - .env.production
    depends_on:
      - livekit
    network_mode: host
    restart: unless-stopped
